@page
@model LOVA.API.Pages.Lottingelund.SurveyModel
@{
}

<style>
    body {
        background-color: #eee;
    }

    #regForm {
        background-color: #ffffff;
        margin: 0px auto;
        font-family: Raleway;
        padding: 40px;
        border-radius: 10px
    }

    #register {
        color: #6A1B9A
    }

    h1 {
        text-align: center
    }

    input {
        padding: 10px;
        width: 100%;
        font-size: 17px;
        font-family: Raleway;
        border: 1px solid #aaaaaa;
        border-radius: 10px;
        -webkit-appearance: none
    }

    .tab input:focus {
        border: 1px solid #6a1b9a !important;
        outline: none
    }

    input.invalid {
        border: 1px solid #e03a0666
    }

    .tab {
        display: none
    }

    button {
        background-color: #6A1B9A;
        color: #ffffff;
        border: none;
        border-radius: 50%;
        padding: 10px 20px;
        font-size: 17px;
        font-family: Raleway;
        cursor: pointer
    }

        button:hover {
            opacity: 0.8
        }

        button:focus {
            outline: none !important
        }

    #prevBtn {
        background-color: #bbbbbb
    }

    .all-steps {
        text-align: center;
        margin-top: 30px;
        margin-bottom: 30px;
        width: 100%;
        display: inline-flex;
        justify-content: center
    }

    .step {
        height: 40px;
        width: 40px;
        margin: 0 2px;
        background-color: #bbbbbb;
        border: none;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 15px;
        color: #6a1b9a;
        opacity: 0.5
    }

        .step.active {
            opacity: 1
        }

        .step.finish {
            color: #fff;
            background: #6a1b9a;
            opacity: 1
        }

    .all-steps {
        text-align: center;
        margin-top: 30px;
        margin-bottom: 30px
    }

    .thanks-message {
        display: none
    }
</style>


<div class="container mt-5" style="height:80vh;">
    <div class="row d-flex justify-content-center align-items-center">
        <div class="col-md-8">
            <form id="regForm" method="post">
                <h1 id="register">Enkät - Löttingelund</h1>
                <div class="all-steps" id="all-steps">
                    <span class="step">1</span>
                    <span class="step">2</span>
                    <span class="step">3</span>
                    <span class="step">4</span>
                    <span class="step">5</span>
                    <span class="step">6</span>
                    <span class="step">7</span>
                    <span class="step">8</span>
                </div>
                <div class="tab">
                    <div class="row">
                        <h6>What's your name?</h6>
                    </div>
                    <div class="row mt-5">
                        <p> <input placeholder="Name..." oninput="this.className = ''" name="SurveyViewModel.Query1"></p>
                    </div>
                </div>
                <div class="tab">
                    <h6>What's your city?</h6>
                    <p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="SurveyViewModel.Query2" id="exampleRadios1" value="option1" checked>
                            <label class="form-check-label" for="exampleRadios1">
                                Default radio
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="SurveyViewModel.Query2" id="exampleRadios2" value="option2">
                            <label class="form-check-label" for="exampleRadios2">
                                Second default radio
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="SurveyViewModel.Query2" id="exampleRadios3" value="option3">
                            <label class="form-check-label" for="exampleRadios3">
                                Disabled radio
                            </label>
                        </div>
                    </p>
                </div>
                <div class="tab">
                    <h6>What's your Favourite Shopping site?</h6>
                    @for (var i = 1; i <= 4; i++)
                    {
                        <div class="form-check">
                            <input name="SurveyViewModel.AreChecked1" type="checkbox" value="@i" class="form-check-input" />
                            <label class="form-check-label" for="flexCheckIndeterminate">
                                @i
                            </label>
                        </div>

                    }
                </div>
                <div class="tab">
                    <h6>What's your Favourite Shopping site?</h6>
                    <p><input placeholder="Favourite Shopping site" oninput="this.className = ''" name="SurveyViewModel.Query3"></p>
                </div>
                <div class="tab">
                    <h6>What's your Favourite car?</h6>
                    <p><input placeholder="Favourite car" oninput="this.className = ''" name="SurveyViewModel.Query4"></p>
                </div>
                <div class="tab">
                    <h6>What's your Favourite Song?</h6>
                    <p><input placeholder="Favourite Song" oninput="this.className = ''" name="SurveyViewModel.Query5"></p>
                </div>
                <div class="tab">
                    <h6>What's your Favourite Mobile brand?</h6>
                    <p><input placeholder="Favourite Mobile Brand" oninput="this.className = ''" name="uname"></p>
                </div>
                <div class="tab">
                    <h6>Om du är klar så tryck spara annars kolla igenom svaren.</h6>
                    <button type="submit" class="btn btn-outline-primary">Spara</button>
                </div>

                <div style="overflow:auto;" id="nextprevious">
                    <div style="float:right;"> <button type="button" id="prevBtn" onclick="nextPrev(-1)"><i class="fa fa-angle-double-left"></i></button> <button type="button" id="nextBtn" onclick="nextPrev(1)"><i class="fa fa-angle-double-right"></i></button> </div>
                </div>
            </form>
        </div>
    </div>
</div>


@section Scripts {

<script>
    var currentTab = 0;
    document.addEventListener("DOMContentLoaded", function(event) {

    showTab(currentTab);

    });

    function showTab(n) {
        
        var x = document.getElementsByClassName("tab");
        
        // console.log(x.length);
        x[n].style.display = "block";
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
            } else {
            document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == (x.length - 1)) {
            document.getElementById("nextBtn").innerHTML = '<i class="fa fa-angle-double-right"></i>';
            } else {
            document.getElementById("nextBtn").innerHTML = '<i class="fa fa-angle-double-right"></i>';
        }
        fixStepIndicator(n)
    }

    function nextPrev(n) 
    {
        console.log(n);
        var x = document.getElementsByClassName("tab");
        if (n == 1 && !validateForm()) return false;
        x[currentTab].style.display = "none";
        currentTab = currentTab + n;
        console.log(currentTab);
        if (currentTab == x.length -1) {
                document.getElementById("nextBtn").style.display = "none";
            }else{
                document.getElementById("nextBtn").style.display = "inline";
        }


        if (currentTab >= x.length) {

        document.getElementById("nextprevious").style.display = "none";
        document.getElementById("all-steps").style.display = "none";
        document.getElementById("register").style.display = "none";
        document.getElementById("text-message").style.display = "block";

        }


        showTab(currentTab);
    }

    function fixIndicatorWhenBack(n) 
    {
        var i;
        var x=document.getElementsByClassName("step");
        
    }

   

    function validateForm() {
        var x, y, i, valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("input");
        for (i = 0; i < y.length; i++) 
            { 
            if (y[i].value=="" ) 
            { 
                y[i].className +=" invalid" ; 
                valid=false; 
            } 
        } 
        if (valid) 
        { 
        document.getElementsByClassName("step")[currentTab].className +=" finish" ;
        } 
        return valid; 
    } 

   function fixStepIndicator(n) 
    { 
        console.log("FixStepIndicator");
        console.log(n);
    var i, x=document.getElementsByClassName("step"); 
    for (i=0; i < x.length; i++) 
    { 
     x[i].className=x[i].className.replace(" active", "" ); 
     if (i >= n)
     {
         x[i].className=x[i].className.replace(" finish", "" );
     }
    } 
    x[n].className +=" active" ; 

   }
</script>
 }